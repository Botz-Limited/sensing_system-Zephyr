/*
 * Copyright (c) 2024 Nordic Semiconductor ASA
 *
 * SPDX-License-Identifier: Apache-2.0
 */

#include <freq.h>

/ {
    chosen {
        zephyr,wifi = &nrf7002;
    };
    
    aliases {
        wifi0 = &nrf7002;
    };
};

/* WiFi on SPI4 (arduino_spi) */
&arduino_spi {
    status = "okay";
    
    nrf7002: nrf7002@0 {
        compatible = "nordic,nrf7002-spi";
        status = "okay";
        reg = <0>;
        spi-max-frequency = <DT_FREQ_M(8)>;
        
        /* Interrupt pin - P1.12 (Arduino D7) */
        iovdd-ctrl-gpios = <&gpio1 12 GPIO_ACTIVE_HIGH>;
        bucken-gpios = <&gpio1 13 GPIO_ACTIVE_HIGH>;
        host-irq-gpios = <&gpio1 14 GPIO_ACTIVE_HIGH>;
        
        /* WiFi parameters */
        wifi-max-tx-pwr-2g-dsss = <21>;
        wifi-max-tx-pwr-2g-mcs0 = <23>;
        wifi-max-tx-pwr-2g-mcs7 = <23>;
        wifi-max-tx-pwr-5g-low-mcs0 = <22>;
        wifi-max-tx-pwr-5g-low-mcs7 = <22>;
        wifi-max-tx-pwr-5g-mid-mcs0 = <22>;
        wifi-max-tx-pwr-5g-mid-mcs7 = <22>;
        wifi-max-tx-pwr-5g-high-mcs0 = <22>;
        wifi-max-tx-pwr-5g-high-mcs7 = <22>;
        
        label = "NRF7002";
    };
};